# Clash ç®¡ç†é¢æ¿

ä¸€ä¸ªåŸºäº FastAPI + Vue.js çš„ç°ä»£åŒ– Clash ç®¡ç†é¢æ¿ï¼Œæä¾›ç›´è§‚çš„ Web ç•Œé¢æ¥ç®¡ç† OpenClash é…ç½®ã€‚

## åŠŸèƒ½ç‰¹æ€§

### ğŸ¯ **æ ¸å¿ƒåŠŸèƒ½**
- ğŸ“Š å®æ—¶çŠ¶æ€ç›‘æ§
- ğŸ–¥ï¸ èŠ‚ç‚¹ç®¡ç†å’Œæµ‹è¯•
- âš™ï¸ ç­–ç•¥ç»„é…ç½®
- ğŸ“ é…ç½®æ–‡ä»¶ç¼–è¾‘
- ğŸ“‹ æ—¥å¿—æŸ¥çœ‹
- ğŸ”„ æœåŠ¡é‡å¯

### ğŸ¨ **ç•Œé¢ç‰¹æ€§**
- ç°ä»£åŒ–å“åº”å¼è®¾è®¡
- å®æ—¶æ•°æ®æ›´æ–°
- ç›´è§‚çš„æ“ä½œç•Œé¢
- ç§»åŠ¨ç«¯é€‚é…

### ğŸ›¡ï¸ **å®‰å…¨ç‰¹æ€§**
- é…ç½®æ–‡ä»¶è‡ªåŠ¨å¤‡ä»½
- é”™è¯¯å¤„ç†å’Œæ¢å¤
- æƒé™éªŒè¯

## æŠ€æœ¯æ ˆ

### åç«¯
- **FastAPI** - é«˜æ€§èƒ½ Python Web æ¡†æ¶
- **Uvicorn** - ASGI æœåŠ¡å™¨
- **PyYAML** - YAML é…ç½®æ–‡ä»¶å¤„ç†
- **Pydantic** - æ•°æ®éªŒè¯

### å‰ç«¯
- **Vue.js 3** - æ¸è¿›å¼ JavaScript æ¡†æ¶
- **Bootstrap 5** - CSS æ¡†æ¶
- **Axios** - HTTP å®¢æˆ·ç«¯
- **Bootstrap Icons** - å›¾æ ‡åº“

## å¿«é€Ÿå®‰è£…

### æ–¹å¼ä¸€ï¼šä¸€é”®å®‰è£…

```bash
# ä¸‹è½½å®‰è£…è„šæœ¬
wget -O install.sh https://raw.githubusercontent.com/ä½ çš„ç”¨æˆ·å/clash-panel/main/install.sh

# è®¾ç½®æ‰§è¡Œæƒé™
chmod +x install.sh

# è¿è¡Œå®‰è£…
./install.sh
```

### æ–¹å¼äºŒï¼šDocker éƒ¨ç½²

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/ä½ çš„ç”¨æˆ·å/clash-panel.git
cd clash-panel

# æ„å»ºå¹¶å¯åŠ¨
docker-compose up -d
```

### æ–¹å¼ä¸‰ï¼šæ‰‹åŠ¨å®‰è£…

```bash
# 1. å®‰è£… Python ä¾èµ–
pip3 install fastapi uvicorn pyyaml python-multipart aiofiles

# 2. å¤åˆ¶æ–‡ä»¶
cp -r backend/ /opt/clash-panel/
cp -r frontend/ /opt/clash-panel/

# 3. å¯åŠ¨æœåŠ¡
cd /opt/clash-panel
python3 backend/main.py
```

## ä½¿ç”¨æ–¹æ³•

### è®¿é—®ç•Œé¢

å®‰è£…å®Œæˆåï¼Œåœ¨æµè§ˆå™¨ä¸­è®¿é—®ï¼š
```
http://ä½ çš„è·¯ç”±å™¨IP:8000
```

### ä¸»è¦åŠŸèƒ½

#### 1. ä»ªè¡¨ç›˜
- æŸ¥çœ‹ Clash æœåŠ¡çŠ¶æ€
- ç›‘æ§å†…å­˜å’Œ CPU ä½¿ç”¨
- æŸ¥çœ‹èŠ‚ç‚¹å’Œç­–ç•¥ç»„ç»Ÿè®¡
- å¿«é€Ÿé‡å¯æœåŠ¡

#### 2. èŠ‚ç‚¹ç®¡ç†
- æŸ¥çœ‹æ‰€æœ‰èŠ‚ç‚¹åˆ—è¡¨
- æµ‹è¯•èŠ‚ç‚¹å»¶è¿Ÿ
- æ‰¹é‡æµ‹è¯•æ‰€æœ‰èŠ‚ç‚¹
- èŠ‚ç‚¹çŠ¶æ€ç›‘æ§

#### 3. ç­–ç•¥ç»„
- æŸ¥çœ‹ç­–ç•¥ç»„é…ç½®
- ç›‘æ§ç­–ç•¥ç»„çŠ¶æ€
- æŸ¥çœ‹èŠ‚ç‚¹åˆ†é…

#### 4. é…ç½®ç®¡ç†
- åœ¨çº¿ç¼–è¾‘é…ç½®æ–‡ä»¶
- ä¿å­˜é…ç½®æ›´æ”¹
- é…ç½®å¤‡ä»½å’Œæ¢å¤

#### 5. æ—¥å¿—æŸ¥çœ‹
- å®æ—¶æŸ¥çœ‹ç³»ç»Ÿæ—¥å¿—
- æ—¥å¿—è¿‡æ»¤å’Œæœç´¢
- é”™è¯¯è¯Šæ–­

## API æ¥å£

### çŠ¶æ€ç®¡ç†
```http
GET /api/status          # è·å–æœåŠ¡çŠ¶æ€
POST /api/restart        # é‡å¯æœåŠ¡
```

### èŠ‚ç‚¹ç®¡ç†
```http
GET /api/nodes           # è·å–æ‰€æœ‰èŠ‚ç‚¹
GET /api/node/{name}/test # æµ‹è¯•èŠ‚ç‚¹å»¶è¿Ÿ
```

### é…ç½®ç®¡ç†
```http
GET /api/config          # è·å–é…ç½®
POST /api/config         # ä¿å­˜é…ç½®
GET /api/groups          # è·å–ç­–ç•¥ç»„
```

### æ—¥å¿—ç®¡ç†
```http
GET /api/logs?lines=100  # è·å–æ—¥å¿—
```

## é¡¹ç›®ç»“æ„

```
clash-panel/
â”œâ”€â”€ backend/
â”‚   â””â”€â”€ main.py          # FastAPI åº”ç”¨
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ index.html       # ä¸»é¡µé¢
â”‚   â””â”€â”€ app.js           # Vue.js åº”ç”¨
â”œâ”€â”€ static/              # é™æ€æ–‡ä»¶
â”œâ”€â”€ requirements.txt     # Python ä¾èµ–
â”œâ”€â”€ Dockerfile          # Docker é…ç½®
â”œâ”€â”€ docker-compose.yml  # Docker Compose
â”œâ”€â”€ install.sh          # å®‰è£…è„šæœ¬
â””â”€â”€ README.md           # è¯´æ˜æ–‡æ¡£
```

## é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡

| å˜é‡å | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|--------|------|
| `CONFIG_PATH` | `/etc/openclash/config.yaml` | Clash é…ç½®æ–‡ä»¶è·¯å¾„ |
| `CLASH_SERVICE` | `openclash` | Clash æœåŠ¡åç§° |

### ç«¯å£é…ç½®

é»˜è®¤ç«¯å£ï¼š`8000`

å¯ä»¥é€šè¿‡ä¿®æ”¹ `main.py` ä¸­çš„ `uvicorn.run()` å‚æ•°æ¥æ›´æ”¹ç«¯å£ã€‚

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. æœåŠ¡æ— æ³•å¯åŠ¨
```bash
# æ£€æŸ¥ Python ä¾èµ–
pip3 list | grep fastapi

# æ£€æŸ¥ç«¯å£å ç”¨
netstat -tlnp | grep 8000

# æŸ¥çœ‹é”™è¯¯æ—¥å¿—
tail -f /var/log/clash-panel.log
```

#### 2. æ— æ³•è®¿é—®ç•Œé¢
```bash
# æ£€æŸ¥é˜²ç«å¢™
iptables -L | grep 8000

# æ£€æŸ¥æœåŠ¡çŠ¶æ€
/etc/init.d/clash-panel status

# æ‰‹åŠ¨å¯åŠ¨æœåŠ¡
python3 /opt/clash-panel/backend/main.py
```

#### 3. é…ç½®æ–‡ä»¶è¯»å–å¤±è´¥
```bash
# æ£€æŸ¥æ–‡ä»¶æƒé™
ls -la /etc/openclash/config.yaml

# æ£€æŸ¥æ–‡ä»¶å†…å®¹
cat /etc/openclash/config.yaml
```

## å¼€å‘æŒ‡å—

### æœ¬åœ°å¼€å‘

```bash
# 1. å…‹éš†ä»“åº“
git clone https://github.com/ä½ çš„ç”¨æˆ·å/clash-panel.git
cd clash-panel

# 2. å®‰è£…ä¾èµ–
pip3 install -r requirements.txt

# 3. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
python3 backend/main.py
```

### æ·»åŠ æ–°åŠŸèƒ½

1. **åç«¯ API**ï¼šåœ¨ `backend/main.py` ä¸­æ·»åŠ æ–°çš„è·¯ç”±
2. **å‰ç«¯ç•Œé¢**ï¼šåœ¨ `frontend/app.js` ä¸­æ·»åŠ æ–°çš„æ–¹æ³•
3. **æ ·å¼è°ƒæ•´**ï¼šä¿®æ”¹ `frontend/index.html` ä¸­çš„ CSS

## è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

### å¼€å‘è§„èŒƒ

- ä½¿ç”¨ Python ç±»å‹æ³¨è§£
- éµå¾ª PEP 8 ä»£ç è§„èŒƒ
- æ·»åŠ é€‚å½“çš„é”™è¯¯å¤„ç†
- ç¼–å†™å•å…ƒæµ‹è¯•

## è®¸å¯è¯

MIT License

## æ›´æ–°æ—¥å¿—

### v1.0.0
- åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- åŸºç¡€åŠŸèƒ½å®ç°
- ç°ä»£åŒ–ç•Œé¢è®¾è®¡
- Docker æ”¯æŒ 